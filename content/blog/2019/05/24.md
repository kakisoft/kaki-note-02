---
slug: "/2019-05-24"
date: "2019-05-24"
title: "【Netlify】リダイレクト設定が上手く行ってない・・・と思ってたら上手く行ってた。"
author: "kakisoft"
tags: ["2019-05"]
---
先週から書き始めたブログ、独自ドメイン取ったんで、Netlifyのデフォルトドメインからリダイレクトする設定を入れたんだが、上手く動かぬー。  

公開するサイトのルート直下に、「_redirects」というファイルを作成して、リダイレクトの内容を書いていくみたいだけど、ちゃんと動いてねーっす。  

公式マニュアル、こんな感じ。  
<https://www.netlify.com/docs/redirects/>  

あと、このサイトも参考にした。  
[Netlifyを独自ドメインで使うときにやっておくべきリダイレクトの設定](https://diwao.com/2017/07/netlify-redirect-settings-for-original-domain.html)  


設定内容は、公式が用意している [Netlify’s Playground.](https://play.netlify.com/redirects) というサイトにてチェックできるんだけど、それではOKだった。  

というか、Netlify大先生が、  
「はっはー！　キミが欲しいリダイレクトルールは、きっとこれだね！」  
と丁寧に用意してくれているんで、それを使ったから、間違っているとかは無いと思う。  
多分、独自ドメイン取ったら、勝手にこのメニュー作ってくれる。  
至れり尽くせり過ぎだろ！Netlify先生！  
最近は、すっかり Netlifyの魅力に取り憑かれ、色々と触っているが、そのうち NetlifyがなければWeb開発が出来ない人間になってしまいそうだ。  

今使ってるのは、[Gatsby developer blog](https://github.com/RyanFitzgerald/devblog) をベースにしてる。  
はて？　「_redirects」は、どこの階層に置いとけばいいんじゃーい。と、少し悩んだが、  
どうやら、「static/」のパスっぽい。  

「gatsby build」コマンドでビルドしたら、公開ルートディレクトリの「public/」に、ちゃんとファイルが出来てるし。  

が、リダイレクトは動かず、無情に「netlify.com」のページを表示し続けるのみ。  

な・・・なぜだぁーー！！　何が悪いんだーー！！！  

悩み続け、マニュアルを読んでみると、どうやら 「netlify.toml」ファイルにもリダイレクト設定をする事ができるみたいなんで、そっちでやってみようかと思った。  
それでもダメならサポセンじゃー！  

・・・という所までが先日。  


んで、試しに netlify.com のドメインにアクセスしたら・・・  

正常に動いてるよ！  

何で？？　何で？？？　昨日は全然動いてなかったのに、何で？？  
反映されるまで時間がかかるって事？？？  

と、悩みに悩んで触り続けると、管理画面のリンクから netlify.com のドメインを踏むと、リダイレクトされずにそのURLとなる事を発見！  

これが原因か！？  
つーか、もうその可能性しかなさそうだぞ！！  

というわけで、リダイレクトの動作確認する場合、ポータル画面からリンクを踏むのではなく、別途、ページを開いて直接URLを叩く事を推奨。  

ハマったー。  
でも、無事解決できてよかたー。  

