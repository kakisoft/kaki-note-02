---
slug: "/2019-05-06"
date: "2019-05-06"
title: "【Node.js】csv（というライブラリ）の使い方がよく分からない。"
author: "kakisoft"
tags: ["2019-05"]
---
使えそうだと思っていた csv パーサは、種々の問題が出たので（解決策があるかもしれないけど、現時点の自分では無理でした）、[csv](https://www.npmjs.com/package/csv) というライブラリを使ってみることにした。  
ダウンロード数がめっちゃ多いし、デファクトスタンダードになってるっぽい？　[公式ページも付いてる](https://csv.js.org/)し、なんだかすごさげだぞ。  
パッケージ４つで１セットとか、最近使ったライブラリの中では、かなり豪華な感じ。  
できる事がすっげーいっぱいありそうな  

・・・何だこれ。  
やりたい事が、「テキストエリアに出力されている CVS をパースして、ちょっと加工して JSON に変換」なんだけど、マジでどうすりゃいいんだこれ。  

自分が読めばいいのは、「parse」の部分だろうから、読むのは多分これ。  
[https://csv.js.org/parse](https://csv.js.org/parse)  


使用例を見ても、さっぱりイメージできん。  
何でこんなにパラメータいっぱい使ってんの？　この大量のパラメータの役割は何なの？　何のためにこのパラメータズは必要なの？　assert を require してるけど、これって何？　というかこれは僕のやりたい事が実現できる物なの？  
と、無限に疑問が湧いてくる。  
そして疑問点が解決したとしても、僕がやりたい事が解決できるとは思えないのは何でだ。  

（しばらく読んだり、サンプルをコピッて動かしてみたりする） 

あ。無理。  
これ触るのやめとこう。  
俺はこのライブラリを使うのをやめるぞジョジョーーーーー！！！！！  

このライブラリ、結構な数のダウンロード数があって、ユーザ数も多そうなイメージを持ったんだけど、世の JavaScriptユーザは、これを使いこなしてるの？  
このマニュアルを読んで、自分のやりたい事を拾い上げてコーディングしてるの・・・？　  
改めて自分のエンジニアスキルのヤバさが浮き彫りになったような・・・。　いや、深く考えるのはやめとこう。未来の自分がきっと何とかしてくれる。  

という事で、CSV のパースは、原始的にぐるぐる回しながらパースしておくことにします。  
・・・って、結局こんな終着点かよおおお！！！　ライブラリ使って楽できると思ったのに。  

まぁ、でも CSV のパースは、以前[ちょっとしたツール](https://github.com/kakisoft/MyTrivialTools)作った時に生々しく書いたんで、その時の処理を使うか。  

・・・ところで、この処理をユーティリティ関数として使いたいと思ったんだけど、Vue.js でそういうのはどうすんだ？  
というわけで、今の僕のレベルでは太刀打ちできない大魔王[vue-element-admin](https://github.com/PanJiaChen/vue-element-admin
)を参考にしてみる。  

/src/utils にて定義して export function、呼び出し側はそれを import、というやり方でいいみたい。  
何だかこれは正攻法っぽいんで、参考にさせてもらおう。  

と言う訳で、結局、泥臭い解決方法でファイナルアンサー。  

