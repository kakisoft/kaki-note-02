---
slug: "/2019-03-04"
date: "2019-03-04"
title: "Vue.js：vue-element-admin遊びの続き２"
author: "kakisoft"
tags: ["2019-03"]
---
<https://github.com/PanJiaChen/vue-element-admin?utm_source=mybridge&utm_medium=blog&utm_campaign=read_more>  

ログインしていなかったら、ログインページにリダイレクトされる処理を、リダイレクトしないように変更したら、色々変なことが起こった。  
（メニューが一切出てこないとか）  
という事で、以下のどれかで対策。  

 - 権限がなくてもメニューを表示させるようにする
 - 自動で admin ログインする
 - ログインせずとも、adminでログインしているかのような挙動にする

admin と userでは、表示するメニューが違ってて（編集可）、それを全ユーザが見れるようにしとけばいいんじゃね、と思ったが、どうも role（admin とか user といった役割）が、必ず割り振られている事が前提っぽい。  
この前提を崩すと、各所の修正が大変そう。  
一旦、保留。  

自動で adminログインするのは、簡単には実現できなかった。  
ログインに api投げて（axios使う）その戻り値で判定しているだけでなく、ログイン時に store（Vuex）に roleの情報や、roleに割り振る値を格納ってるっぽい。  
「こんな感じ？」みたいに当て感で触るのはかなり厳しくなっててきた。  
ちゃんと Vuex や axios を理解する必要がある。  
一旦、保留。  

ログインせずとも、adminでログインしているかのようにする場合、tokenの値のセットと、戻り値の判定だけで行ける・・・？　ような気がしたが、上手く行かず。  
原因究明中。  
こっちでしばらくやってみるか。  

